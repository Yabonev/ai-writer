#!/usr/bin/env sh
# Pre-commit quality gates - runs automatically before each commit
# This ensures all committed code meets quality standards

echo "ğŸ” Running pre-commit quality checks..."

# Step 1: TypeScript type checking
echo "ğŸ“ Checking TypeScript types..."
npm run typecheck || {
  echo "âŒ TypeScript errors found. Fix them before committing."
  exit 1
}

# Step 2: ESLint code quality
echo "ğŸ” Running ESLint..."
npm run lint || {
  echo "âŒ ESLint errors found. Run 'npm run lint:fix' to auto-fix."
  exit 1
}

# Step 3: Staged files formatting and linting
echo "âœ¨ Running lint-staged..."
npx lint-staged || {
  echo "âŒ Lint-staged failed. Check the output above."
  exit 1
}

echo "âœ… All pre-commit checks passed!"
